server_name: localhost
public_baseurl: http://localhost:8008/

pid_file: '/var/run/matrix-synapse.pid'

listeners:
  - port: 8008
    tls: false
    type: http
    x_forwarded: false
    bind_addresses: ['0.0.0.0']

    resources:
      - names: [client]
        compress: false

database:
  name: psycopg2
  args:
    database: synapse
    user: synapse
    password: hunter2
    host: postgres
    port: 5432
    cp_min: 5
    cp_max: 10
#database:
#  name: sqlite3
#  args:
#    database: /data/homeserver.db

log_config: '/data/localhost.log.config'
media_store_path: '/data/media_store'
report_stats: false
enable_registration: true
enable_registration_without_verification: true
macaroon_secret_key: 'xN1OxX=0=WDNAP+dq7v8w&zI7#nH7+ho#jg*8RVv9ZoW8#GDmT'
form_secret: 'z+3Z-B*6oi9@@Uc55K@+KOy26@eDdLK-^b-lij&f-o6C2lbKzE'
registration_shared_secret: '8^5:4zQl6J@LjJz~5JiW^=kI0_IO8c8B_8d&YEPp.NAbMa*&zw'

allowed_local_3pids:
  - medium: email
    pattern: '.*@localhost.com'
  - medium: email
    pattern: '.*@nomail.com'
  - medium: msisdn
    pattern: '\\+\d\d'
# Enable 3PIDs lookup requests to identity servers from this server.
#
enable_3pid_lookup: true


rc_registration:
  per_second: 100
  burst_count: 100

rc_message:
  per_second: 100
  burst_count: 100

rc_login:
  address:
    per_second: 100
    burst_count: 100
  account:
    per_second: 100
    burst_count: 100

rc_invites:
  per_room:
    per_second: 100
    burst_count: 100
  per_user:
    per_second: 100
    burst_count: 100

rc_joins:
  local:
    per_second: 100
    burst_count: 100
  remote:
    per_second: 100
    burst_count: 100

app_service_config_files:
  - /data/registration.yaml
trusted_key_servers:
  - server_name: 'matrix.org'

signing_key_path: '/data/localhost.signing.key'
